{% extends "base.html" %}

{% block title %}ArcadeArchive - {{ title }}{% endblock %}

{% block content %}

    <!-- The JS will put the game name in the span -->
    <h1>Now Playing: <span id="game-title">...</span></h1>
    <div class="game-container">
        <button id="play-button" class="btn btn-primary btn-play">PLAY</button>
        <div id="game-message" class="hidden">
            <p>No game for you yet!</p>
        </div>
    </div>
    <!-- presonal scores table -->
    <div class="personal-scores-container">
        <h2>Your Personal Bests</h2>
        
        <!-- All controls are now grouped together -->
        <div class="controls-bar">
            <div class="sort-controls">
                <span>Sort by:</span>
                <button id="sort-by-date" class="btn btn-small btn-primary">Last Played</button>
                <button id="sort-by-score" class="btn btn-small btn-secondary">Highest Score</button>
            </div>
            <div class="pagination-controls">
                <button id="toggle-all-scores" class="btn btn-secondary">Show All</button>
            </div>
        </div>
    
        <table class="scores-table">
            <thead>
                <tr>
                    <th>Score</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody id="scores-table-body"></tbody>
        </table>
    </div>

        <!-- GUEST SCORE DIALOG -->
    <dialog id="guest-score-dialog">
        <h2>Game Over!</h2>
        <p>Your Score: <span class="modal-score">0</span></p>
        <p>Want to save your score to the leaderboard?</p>
        <!-- Wrap the actions in a form -->
        <form method="dialog" class="modal-actions">
            <a href="{{ url_for('auth') }}" class="btn btn-primary btn-full-width">Login / Register</a>
            <button class="btn btn-secondary btn-full-width" value="cancel">Maybe Later</button>
        </form>
    </dialog>

       <!-- USER SCORE DIALOG -->
    <dialog id="user-score-dialog">
        <h2>Game Over!</h2>
        <p>Your Score: <span class="modal-score">0</span></p>
        <p>Your score has been submitted!</p>
        <!-- Wrap the actions in a form -->
        <form method="dialog" class="modal-actions">
            <button class="btn btn-primary btn-full-width" value="cancel">Continue</button>
        </form>
    </dialog>
    
{% endblock %}